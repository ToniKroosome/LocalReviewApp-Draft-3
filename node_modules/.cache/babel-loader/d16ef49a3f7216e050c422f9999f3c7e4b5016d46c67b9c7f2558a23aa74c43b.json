{"ast":null,"code":"var _jsxFileName = \"/Users/tonikroosome/Documents/All Work Po/LocalReviewReal s/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Search, Star, Camera, CheckCircle, User, TrendingUp, Calendar, Filter, Plus, X, ChevronDown, LogOut, Sparkles, MapPin, Globe, Heart, MessageCircle, Award, Clock, ArrowLeft } from 'lucide-react';\nimport { initialSampleReviews } from './data/sampleReviews';\nimport Header from './components/Header';\nimport ItemList from './components/ItemList';\nimport ItemDetailPage from './components/ItemDetailPage';\nimport FilterBar from './components/FilterBar';\nimport './styles/FilterBar.css';\nimport GoogleIcon from \"./components/GoogleIcon\";\nimport ReviewFormModal from \"./components/ReviewFormModal\";\nimport PaymentPage from \"./components/PaymentPage\";\nimport { initScrollbarStyles } from \"./utils/scrollbarStyles\";\nimport generateImage from \"./utils/imageGeneration\";\nimport { signIn, signOut } from \"./utils/auth\";\nimport { auth, onAuthStateChanged } from \"./utils/mockFirebase\";\nimport { categories } from \"./data/categories\";\nimport { citiesData } from \"./data/citiesData\";\nimport { bangkokStreetsData } from \"./data/bangkokStreetsData\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ninitScrollbarStyles();\n\n// Main App Component with enhanced design\nconst App = () => {\n  _s();\n  const [page, setPage] = useState('home'); // 'home', 'detail', 'payment'\n  const [selectedItem, setSelectedItem] = useState(null);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [language, setLanguage] = useState(() => localStorage.getItem('language') || 'en');\n  const [selectedMainCategory, setSelectedMainCategory] = useState('all');\n  const [selectedCategory, setSelectedCategory] = useState('all');\n  const [selectedSubCategory, setSelectedSubCategory] = useState('all');\n  const [selectedFilters, setSelectedFilters] = useState({\n    category: 'All Categories',\n    shopType: '',\n    onlineType: '',\n    city: '',\n    district: '',\n    zone: '',\n    subDistrict: '',\n    street: '',\n    alley: ''\n  });\n  const [showReviewForm, setShowReviewForm] = useState(false);\n  const [reviews, setReviews] = useState([]);\n  const [user, setUser] = useState(null); // Changed from userId to user object\n  const [isAuthReady, setIsAuthReady] = useState(false);\n  const [noMatchingReviewsMessage, setNoMatchingReviewsMessage] = useState('');\n  const [isLoadingNoMatchingReviewsMessage, setIsLoadingNoMatchingReviewsMessage] = useState(false);\n  const [generatedImages, setGeneratedImages] = useState({}); // State for dynamically generated images\n  const [creditsBalance, setCreditsBalance] = useState(0);\n  // Visibility states for search and filter UI controlled by Header buttons\n  const [showSearchBar, setShowSearchBar] = useState(false);\n  const [showFilters, setShowFilters] = useState(false);\n  useEffect(() => {\n    localStorage.setItem('language', language);\n  }, [language]);\n  const toggleSearchBar = () => setShowSearchBar(v => !v);\n  const toggleFilters = () => setShowFilters(v => !v);\n  const [showHeader, setShowHeader] = useState(true);\n  const [lastScrollY, setLastScrollY] = useState(window.scrollY);\n  useEffect(() => {\n    const handleScroll = () => {\n      if (window.scrollY < 40) setShowHeader(true);else if (window.scrollY > lastScrollY) setShowHeader(false);else setShowHeader(true);\n      setLastScrollY(window.scrollY);\n    };\n    window.addEventListener(\"scroll\", handleScroll);\n    return () => window.removeEventListener(\"scroll\", handleScroll);\n  }, [lastScrollY]);\n  const handleFilterChange = filters => {\n    setSelectedFilters(filters);\n  };\n  const [newReview, setNewReview] = useState({\n    itemName: '',\n    mainCategory: '',\n    category: '',\n    subCategory: '',\n    location: {\n      city: '',\n      district: '',\n      zone: '',\n      subDistrict: '',\n      street: '',\n      alley: '',\n      specificArea: ''\n    },\n    rating: 5,\n    comment: '',\n    author: ''\n  });\n  // Multi-criteria filtering block\n  const filteredReviews = reviews.filter(item => {\n    const qTrim = searchQuery.trim();\n    const qLower = qTrim.toLowerCase();\n    const matchesSearch = item.itemName.toLowerCase().includes(qLower) || language === 'th' && item.itemName_th && item.itemName_th.includes(qTrim) || item.category.toLowerCase().includes(qLower) || language === 'th' && item.category_th && item.category_th.includes(qTrim) || item.subCategory.toLowerCase().includes(qLower) || language === 'th' && item.subCategory_th && item.subCategory_th.includes(qTrim) || item.location && item.location.city && (item.location.city.toLowerCase().includes(qLower) || language === 'th' && item.location.city_th && item.location.city_th.includes(qTrim)) || item.location && item.location.district && (item.location.district.toLowerCase().includes(qLower) || language === 'th' && item.location.district_th && item.location.district_th.includes(qTrim));\n    const matchesMainCategory = selectedMainCategory === 'all' || item.mainCategory === selectedMainCategory;\n    const matchesCategory = selectedCategory === 'all' || item.category === selectedCategory;\n    const matchesSubCategory = selectedSubCategory === 'all' || item.subCategory === selectedSubCategory;\n    const matchesCategoryBar = !selectedFilters.category || selectedFilters.category.startsWith('All') || item.mainCategory === selectedFilters.category || item.category === selectedFilters.category;\n    const matchesCity = !selectedFilters.city || selectedFilters.city.startsWith('All') || item.location && item.location.city === selectedFilters.city;\n    const matchesDistrict = !selectedFilters.district || selectedFilters.district.startsWith('All') || item.location && item.location.district === selectedFilters.district;\n    const matchesZone = !selectedFilters.zone || selectedFilters.zone.startsWith('All') || item.location && item.location.zone === selectedFilters.zone;\n    const matchesSubDistrict = !selectedFilters.subDistrict || selectedFilters.subDistrict.startsWith('All') || item.location && item.location.subDistrict === selectedFilters.subDistrict;\n    const matchesStreet = !selectedFilters.street || selectedFilters.street.startsWith('All') || item.location && item.location.street === selectedFilters.street;\n    const matchesAlley = !selectedFilters.alley || selectedFilters.alley.startsWith('All') || item.location && item.location.alley === selectedFilters.alley;\n    const matchesShopType = !selectedFilters.shopType || selectedFilters.shopType.startsWith('All') || item.subCategory === selectedFilters.shopType;\n    let matchesOnlineType = true;\n    if (selectedFilters.onlineType && item.mainCategory === 'Online') {\n      const onlineMap = {\n        'Social Media App': ['Facebook', 'Instagram', 'TikTok', 'Telegram', 'Line', 'YouTube', 'Shopee'],\n        'Website': ['Website'],\n        'Individual Remote Services': ['Online Service (General)']\n      };\n      const allowed = onlineMap[selectedFilters.onlineType] || [];\n      matchesOnlineType = allowed.includes(item.category);\n    }\n    return matchesSearch && matchesMainCategory && matchesCategory && matchesSubCategory && matchesCategoryBar && matchesCity && matchesDistrict && matchesZone && matchesSubDistrict && matchesStreet && matchesAlley && matchesShopType && matchesOnlineType;\n  });\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, user => {\n      setUser(user);\n      setIsAuthReady(true);\n    });\n    return () => unsubscribe();\n  }, []);\n  useEffect(() => {\n    if (isAuthReady) {\n      setReviews(initialSampleReviews);\n    }\n  }, [isAuthReady]);\n\n  // Update newReview author when user logs in\n  useEffect(() => {\n    if (user) {\n      setNewReview(prev => ({\n        ...prev,\n        author: user.displayName || ''\n      }));\n    }\n  }, [user]);\n  const handleItemClick = item => {\n    setSelectedItem(item);\n    setPage('detail');\n  };\n  const handleBack = () => {\n    setSelectedItem(null);\n    setPage('home');\n  };\n  const handleBuyCredits = () => {\n    setPage('payment');\n  };\n  const handlePaymentComplete = amount => {\n    setCreditsBalance(b => b + amount);\n    setPage('home');\n  };\n  const handleLogin = async () => {\n    try {\n      const {\n        user: loggedInUser\n      } = await signIn();\n      setUser(loggedInUser);\n    } catch (error) {\n      console.error(\"Error signing in with Google:\", error);\n    }\n  };\n  const handleLogout = async () => {\n    await signOut();\n    setUser(null);\n    setPage('home'); // Go to home page on logout\n  };\n  const handleSubmitReview = newReviewData => {\n    if (!user) {\n      console.log(language === 'en' ? 'You must be logged in to submit a review.' : 'คุณต้องเข้าสู่ระบบเพื่อส่งรีวิว');\n      alert(language === 'en' ? 'Please sign in to write a review.' : 'กรุณาเข้าสู่ระบบเพื่อเขียนรีวิว');\n      return;\n    }\n    if (!newReviewData.itemName.trim() || !newReviewData.mainCategory || !newReviewData.category || !newReviewData.comment.trim() || !newReviewData.author.trim()) {\n      console.log(language === 'en' ? 'Please fill in all required fields (Item Name, Main Category, Category, Your Review, Your Name).' : 'กรุณากรอกข้อมูลที่จำเป็นทั้งหมด (ชื่อรายการ, หมวดหมู่หลัก, หมวดหมู่, รีวิวของคุณ, ชื่อของคุณ)');\n      return;\n    }\n    const reviewToAdd = {\n      id: Date.now(),\n      author: newReviewData.author.trim(),\n      rating: newReviewData.rating,\n      date: new Date().toISOString().split('T')[0],\n      comment: newReviewData.comment.trim(),\n      comment_th: newReviewData.comment_th ? newReviewData.comment_th.trim() : '',\n      verified: true,\n      // Mark as verified since user is logged in\n      helpful: 0,\n      authorId: user.uid,\n      // Add author's ID\n      authorPhotoURL: user.photoURL // Add author's photo\n    };\n    const existingItemIndex = reviews.findIndex(item => item.itemName.toLowerCase() === newReviewData.itemName.toLowerCase().trim() && item.mainCategory === newReviewData.mainCategory && item.category === newReviewData.category && item.subCategory === newReviewData.subCategory);\n    let updatedReviews = [...reviews];\n    let updatedItem;\n    if (existingItemIndex > -1) {\n      const itemToUpdate = {\n        ...updatedReviews[existingItemIndex]\n      };\n      const newReviewCount = itemToUpdate.reviewCount + 1;\n      const oldTotalRating = itemToUpdate.rating * itemToUpdate.reviewCount;\n      itemToUpdate.rating = (oldTotalRating + newReviewData.rating) / newReviewCount;\n      itemToUpdate.reviewCount = newReviewCount;\n      itemToUpdate.reviews = [reviewToAdd, ...itemToUpdate.reviews];\n      updatedReviews[existingItemIndex] = itemToUpdate;\n      updatedItem = itemToUpdate;\n      console.log(language === 'en' ? 'Review added to existing item!' : 'เพิ่มรีวิวในรายการที่มีอยู่แล้ว!');\n    } else {\n      const newItem = {\n        id: `new-item-${Date.now()}`,\n        itemName: newReviewData.itemName.trim(),\n        mainCategory: newReviewData.mainCategory,\n        category: newReviewData.category,\n        subCategory: newReviewData.subCategory,\n        location: newReviewData.location,\n        rating: newReviewData.rating,\n        reviewCount: 1,\n        reviews: [reviewToAdd]\n      };\n      updatedReviews = [newItem, ...updatedReviews];\n      updatedItem = newItem;\n      console.log(language === 'en' ? 'New item and review submitted!' : 'ส่งรายการใหม่และรีวิวแล้ว!');\n    }\n    setReviews(updatedReviews);\n    setShowReviewForm(false);\n    setNewReview({\n      itemName: '',\n      mainCategory: '',\n      category: '',\n      subCategory: '',\n      location: {\n        city: '',\n        district: '',\n        zone: '',\n        subDistrict: '',\n        street: '',\n        alley: '',\n        specificArea: ''\n      },\n      rating: 5,\n      comment: '',\n      author: user.displayName || ''\n    });\n    if (page === 'detail') {\n      setSelectedItem(updatedItem);\n    }\n  };\n  useEffect(() => {\n    if (filteredReviews.length === 0 && isAuthReady && page === 'home') {\n      setIsLoadingNoMatchingReviewsMessage(true);\n      setTimeout(() => {\n        const message = language === 'en' ? `No reviews match your filters. Be the first to add one!` : `ไม่พบรีวิวที่ตรงกับเกณฑ์ของคุณ เป็นคนแรกที่เพิ่มรีวิว!`;\n        setNoMatchingReviewsMessage(message);\n        setIsLoadingNoMatchingReviewsMessage(false);\n      }, 300);\n    }\n  }, [filteredReviews.length, isAuthReady, language, page]);\n  if (page === 'payment') {\n    return /*#__PURE__*/_jsxDEV(PaymentPage, {\n      onBack: handleBack,\n      onComplete: handlePaymentComplete\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 16\n    }, this);\n  }\n  if (page === 'detail') {\n    return /*#__PURE__*/_jsxDEV(ItemDetailPage, {\n      item: selectedItem,\n      onBack: handleBack,\n      language: language,\n      categories: categories,\n      citiesData: citiesData,\n      bangkokStreetsData: bangkokStreetsData,\n      generatedImages: generatedImages,\n      setGeneratedImages: setGeneratedImages\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 13\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gradient-to-br from-gray-950 via-gray-900 to-gray-950 text-gray-100 font-sans antialiased pt-12\",\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      showHeader: showHeader,\n      toggleSearchBar: toggleSearchBar,\n      toggleFilters: toggleFilters,\n      user: user,\n      handleLogin: handleLogin,\n      handleLogout: handleLogout,\n      setShowReviewForm: setShowReviewForm,\n      onBuyCredits: handleBuyCredits,\n      creditsBalance: creditsBalance,\n      language: language,\n      setLanguage: setLanguage,\n      GoogleIcon: GoogleIcon\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 5\n    }, this), showSearchBar && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"px-4 py-2\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative\",\n        children: [/*#__PURE__*/_jsxDEV(Search, {\n          className: \"absolute left-3 top-2.5 text-gray-400\",\n          size: 16\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: searchQuery,\n          onChange: e => setSearchQuery(e.target.value),\n          placeholder: language === 'en' ? 'Search...' : 'ค้นหา...',\n          className: \"w-full pl-8 pr-3 py-2 rounded-md bg-gray-800 placeholder-gray-500 text-sm focus:outline-none\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 9\n    }, this), showFilters && /*#__PURE__*/_jsxDEV(FilterBar, {\n      onFilterChange: handleFilterChange,\n      language: language\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(ItemList, {\n      filteredReviews: filteredReviews,\n      isAuthReady: isAuthReady,\n      handleItemClick: handleItemClick,\n      language: language,\n      categories: categories,\n      citiesData: citiesData,\n      bangkokStreetsData: bangkokStreetsData,\n      generatedImages: generatedImages,\n      setGeneratedImages: setGeneratedImages,\n      isLoadingNoMatchingReviewsMessage: isLoadingNoMatchingReviewsMessage,\n      noMatchingReviewsMessage: noMatchingReviewsMessage,\n      generateImage: generateImage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 5\n    }, this), showReviewForm && /*#__PURE__*/_jsxDEV(ReviewFormModal, {\n      show: showReviewForm,\n      onClose: () => setShowReviewForm(false),\n      newReview: newReview,\n      setNewReview: setNewReview,\n      onSubmit: handleSubmitReview,\n      categories: categories,\n      citiesData: citiesData,\n      bangkokStreetsData: bangkokStreetsData,\n      language: language\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 299,\n    columnNumber: 3\n  }, this);\n};\n_s(App, \"94g3gkd3CWoa6OQe21UblzsxxGU=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","Search","Star","Camera","CheckCircle","User","TrendingUp","Calendar","Filter","Plus","X","ChevronDown","LogOut","Sparkles","MapPin","Globe","Heart","MessageCircle","Award","Clock","ArrowLeft","initialSampleReviews","Header","ItemList","ItemDetailPage","FilterBar","GoogleIcon","ReviewFormModal","PaymentPage","initScrollbarStyles","generateImage","signIn","signOut","auth","onAuthStateChanged","categories","citiesData","bangkokStreetsData","jsxDEV","_jsxDEV","App","_s","page","setPage","selectedItem","setSelectedItem","searchQuery","setSearchQuery","language","setLanguage","localStorage","getItem","selectedMainCategory","setSelectedMainCategory","selectedCategory","setSelectedCategory","selectedSubCategory","setSelectedSubCategory","selectedFilters","setSelectedFilters","category","shopType","onlineType","city","district","zone","subDistrict","street","alley","showReviewForm","setShowReviewForm","reviews","setReviews","user","setUser","isAuthReady","setIsAuthReady","noMatchingReviewsMessage","setNoMatchingReviewsMessage","isLoadingNoMatchingReviewsMessage","setIsLoadingNoMatchingReviewsMessage","generatedImages","setGeneratedImages","creditsBalance","setCreditsBalance","showSearchBar","setShowSearchBar","showFilters","setShowFilters","setItem","toggleSearchBar","v","toggleFilters","showHeader","setShowHeader","lastScrollY","setLastScrollY","window","scrollY","handleScroll","addEventListener","removeEventListener","handleFilterChange","filters","newReview","setNewReview","itemName","mainCategory","subCategory","location","specificArea","rating","comment","author","filteredReviews","filter","item","qTrim","trim","qLower","toLowerCase","matchesSearch","includes","itemName_th","category_th","subCategory_th","city_th","district_th","matchesMainCategory","matchesCategory","matchesSubCategory","matchesCategoryBar","startsWith","matchesCity","matchesDistrict","matchesZone","matchesSubDistrict","matchesStreet","matchesAlley","matchesShopType","matchesOnlineType","onlineMap","allowed","unsubscribe","prev","displayName","handleItemClick","handleBack","handleBuyCredits","handlePaymentComplete","amount","b","handleLogin","loggedInUser","error","console","handleLogout","handleSubmitReview","newReviewData","log","alert","reviewToAdd","id","Date","now","date","toISOString","split","comment_th","verified","helpful","authorId","uid","authorPhotoURL","photoURL","existingItemIndex","findIndex","updatedReviews","updatedItem","itemToUpdate","newReviewCount","reviewCount","oldTotalRating","newItem","length","setTimeout","message","onBack","onComplete","fileName","_jsxFileName","lineNumber","columnNumber","className","children","onBuyCredits","size","type","value","onChange","e","target","placeholder","onFilterChange","show","onClose","onSubmit","_c","$RefreshReg$"],"sources":["/Users/tonikroosome/Documents/All Work Po/LocalReviewReal s/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Search, Star, Camera, CheckCircle, User, TrendingUp, Calendar, Filter, Plus, X, ChevronDown, LogOut, Sparkles, MapPin, Globe, Heart, MessageCircle, Award, Clock, ArrowLeft } from 'lucide-react';\nimport { initialSampleReviews } from './data/sampleReviews';\nimport Header from './components/Header';\nimport ItemList from './components/ItemList';\nimport ItemDetailPage from './components/ItemDetailPage';\nimport FilterBar from './components/FilterBar';\nimport './styles/FilterBar.css';\n\nimport GoogleIcon from \"./components/GoogleIcon\";\nimport ReviewFormModal from \"./components/ReviewFormModal\";\nimport PaymentPage from \"./components/PaymentPage\";\nimport { initScrollbarStyles } from \"./utils/scrollbarStyles\";\nimport generateImage from \"./utils/imageGeneration\";\nimport { signIn, signOut } from \"./utils/auth\";\nimport { auth, onAuthStateChanged } from \"./utils/mockFirebase\";\nimport { categories } from \"./data/categories\";\nimport { citiesData } from \"./data/citiesData\";\nimport { bangkokStreetsData } from \"./data/bangkokStreetsData\";\n\ninitScrollbarStyles();\n\n\n// Main App Component with enhanced design\nconst App = () => {\n    const [page, setPage] = useState('home'); // 'home', 'detail', 'payment'\n    const [selectedItem, setSelectedItem] = useState(null);\n    const [searchQuery, setSearchQuery] = useState('');\n    const [language, setLanguage] = useState(() => localStorage.getItem('language') || 'en');\n    const [selectedMainCategory, setSelectedMainCategory] = useState('all');\n    const [selectedCategory, setSelectedCategory] = useState('all');\n    const [selectedSubCategory, setSelectedSubCategory] = useState('all');\n    const [selectedFilters, setSelectedFilters] = useState({\n        category: 'All Categories',\n        shopType: '',\n        onlineType: '',\n        city: '',\n        district: '',\n        zone: '',\n        subDistrict: '',\n        street: '',\n        alley: ''\n    });\n    const [showReviewForm, setShowReviewForm] = useState(false);\n    const [reviews, setReviews] = useState([]);\n    const [user, setUser] = useState(null); // Changed from userId to user object\n    const [isAuthReady, setIsAuthReady] = useState(false);\n    const [noMatchingReviewsMessage, setNoMatchingReviewsMessage] = useState('');\n    const [isLoadingNoMatchingReviewsMessage, setIsLoadingNoMatchingReviewsMessage] = useState(false);\n    const [generatedImages, setGeneratedImages] = useState({}); // State for dynamically generated images\n    const [creditsBalance, setCreditsBalance] = useState(0);\n    // Visibility states for search and filter UI controlled by Header buttons\n    const [showSearchBar, setShowSearchBar] = useState(false);\n    const [showFilters, setShowFilters] = useState(false);\n\n    useEffect(() => {\n        localStorage.setItem('language', language);\n    }, [language]);\n    const toggleSearchBar = () => setShowSearchBar(v => !v);\n    const toggleFilters = () => setShowFilters(v => !v);\n\n    const [showHeader, setShowHeader] = useState(true);\n    const [lastScrollY, setLastScrollY] = useState(window.scrollY);\n\n    useEffect(() => {\n        const handleScroll = () => {\n            if (window.scrollY < 40) setShowHeader(true);\n            else if (window.scrollY > lastScrollY) setShowHeader(false);\n            else setShowHeader(true);\n            setLastScrollY(window.scrollY);\n        };\n        window.addEventListener(\"scroll\", handleScroll);\n        return () => window.removeEventListener(\"scroll\", handleScroll);\n    }, [lastScrollY]);\n\n    const handleFilterChange = (filters) => {\n        setSelectedFilters(filters);\n    };\n\n    const [newReview, setNewReview] = useState({\n        itemName: '',\n        mainCategory: '',   \n        category: '',   \n        subCategory: '',    \n        location: { city: '', district: '', zone: '', subDistrict: '', street: '', alley: '', specificArea: '' },\n        rating: 5,\n        comment: '',\n        author: ''\n    });\n    // Multi-criteria filtering block\n    const filteredReviews = reviews.filter((item) => {\n        const qTrim = searchQuery.trim();\n        const qLower = qTrim.toLowerCase();\n\n        const matchesSearch =\n            item.itemName.toLowerCase().includes(qLower) ||\n            (language === 'th' && item.itemName_th && item.itemName_th.includes(qTrim)) ||\n            item.category.toLowerCase().includes(qLower) ||\n            (language === 'th' && item.category_th && item.category_th.includes(qTrim)) ||\n            item.subCategory.toLowerCase().includes(qLower) ||\n            (language === 'th' && item.subCategory_th && item.subCategory_th.includes(qTrim)) ||\n            (item.location && item.location.city && (\n                item.location.city.toLowerCase().includes(qLower) ||\n                (language === 'th' && item.location.city_th && item.location.city_th.includes(qTrim))\n            )) ||\n            (item.location && item.location.district && (\n                item.location.district.toLowerCase().includes(qLower) ||\n                (language === 'th' && item.location.district_th && item.location.district_th.includes(qTrim))\n            ));\n        const matchesMainCategory = selectedMainCategory === 'all' || item.mainCategory === selectedMainCategory;\n        const matchesCategory = selectedCategory === 'all' || item.category === selectedCategory;\n        const matchesSubCategory = selectedSubCategory === 'all' || item.subCategory === selectedSubCategory;\n        const matchesCategoryBar = !selectedFilters.category || selectedFilters.category.startsWith('All') ||\n            item.mainCategory === selectedFilters.category || item.category === selectedFilters.category;\n        const matchesCity = !selectedFilters.city || selectedFilters.city.startsWith('All') || (item.location && item.location.city === selectedFilters.city);\n        const matchesDistrict = !selectedFilters.district || selectedFilters.district.startsWith('All') || (item.location && item.location.district === selectedFilters.district);\n        const matchesZone = !selectedFilters.zone || selectedFilters.zone.startsWith('All') || (item.location && item.location.zone === selectedFilters.zone);\n        const matchesSubDistrict = !selectedFilters.subDistrict || selectedFilters.subDistrict.startsWith('All') || (item.location && item.location.subDistrict === selectedFilters.subDistrict);\n        const matchesStreet = !selectedFilters.street || selectedFilters.street.startsWith('All') || (item.location && item.location.street === selectedFilters.street);\n        const matchesAlley = !selectedFilters.alley || selectedFilters.alley.startsWith('All') || (item.location && item.location.alley === selectedFilters.alley);\n        const matchesShopType = !selectedFilters.shopType || selectedFilters.shopType.startsWith('All') || item.subCategory === selectedFilters.shopType;\n\n        let matchesOnlineType = true;\n        if (selectedFilters.onlineType && item.mainCategory === 'Online') {\n            const onlineMap = {\n                'Social Media App': ['Facebook', 'Instagram', 'TikTok', 'Telegram', 'Line', 'YouTube', 'Shopee'],\n                'Website': ['Website'],\n                'Individual Remote Services': ['Online Service (General)'],\n            };\n            const allowed = onlineMap[selectedFilters.onlineType] || [];\n            matchesOnlineType = allowed.includes(item.category);\n        }\n\n        return matchesSearch && matchesMainCategory && matchesCategory && matchesSubCategory &&\n            matchesCategoryBar && matchesCity && matchesDistrict && matchesZone && matchesSubDistrict && matchesStreet && matchesAlley && matchesShopType && matchesOnlineType;\n    });\n    useEffect(() => {\n        const unsubscribe = onAuthStateChanged(auth, (user) => {\n            setUser(user);\n            setIsAuthReady(true);\n        });\n        return () => unsubscribe();\n    }, []);\n\n    useEffect(() => {\n        if (isAuthReady) {\n            setReviews(initialSampleReviews);\n        }\n    }, [isAuthReady]);\n\n    // Update newReview author when user logs in\n    useEffect(() => {\n        if (user) {\n            setNewReview(prev => ({ ...prev, author: user.displayName || '' }));\n        }\n    }, [user]);\n\n    const handleItemClick = (item) => {\n        setSelectedItem(item);\n        setPage('detail');\n    };\n\n    const handleBack = () => {\n        setSelectedItem(null);\n        setPage('home');\n    };\n\n    const handleBuyCredits = () => {\n        setPage('payment');\n    };\n\n    const handlePaymentComplete = (amount) => {\n        setCreditsBalance(b => b + amount);\n        setPage('home');\n    };\n      \n    const handleLogin = async () => {\n        try {\n            const { user: loggedInUser } = await signIn();\n            setUser(loggedInUser);\n        } catch (error) {\n            console.error(\"Error signing in with Google:\", error);\n        }\n    };\n\n    const handleLogout = async () => {\n        await signOut();\n        setUser(null);\n        setPage('home'); // Go to home page on logout\n    };\n    \n    const handleSubmitReview = (newReviewData) => {\n        if (!user) {\n            console.log(language === 'en' ? 'You must be logged in to submit a review.' : 'คุณต้องเข้าสู่ระบบเพื่อส่งรีวิว');\n            alert(language === 'en' ? 'Please sign in to write a review.' : 'กรุณาเข้าสู่ระบบเพื่อเขียนรีวิว');\n            return;\n        }\n        if (!newReviewData.itemName.trim() || !newReviewData.mainCategory || !newReviewData.category || !newReviewData.comment.trim() || !newReviewData.author.trim()) {\n            console.log(language === 'en' ? 'Please fill in all required fields (Item Name, Main Category, Category, Your Review, Your Name).' : 'กรุณากรอกข้อมูลที่จำเป็นทั้งหมด (ชื่อรายการ, หมวดหมู่หลัก, หมวดหมู่, รีวิวของคุณ, ชื่อของคุณ)');\n            return;\n        }\n\n        const reviewToAdd = {\n            id: Date.now(),\n            author: newReviewData.author.trim(),\n            rating: newReviewData.rating,\n            date: new Date().toISOString().split('T')[0],\n            comment: newReviewData.comment.trim(),\n            comment_th: newReviewData.comment_th ? newReviewData.comment_th.trim() : '',\n            verified: true, // Mark as verified since user is logged in\n            helpful: 0,\n            authorId: user.uid, // Add author's ID\n            authorPhotoURL: user.photoURL // Add author's photo\n        };\n\n        const existingItemIndex = reviews.findIndex(item => \n            item.itemName.toLowerCase() === newReviewData.itemName.toLowerCase().trim() &&\n            item.mainCategory === newReviewData.mainCategory &&\n            item.category === newReviewData.category &&\n            item.subCategory === newReviewData.subCategory\n        );\n\n        let updatedReviews = [...reviews];\n        let updatedItem;\n\n        if (existingItemIndex > -1) {\n            const itemToUpdate = { ...updatedReviews[existingItemIndex] };\n            const newReviewCount = itemToUpdate.reviewCount + 1;\n            const oldTotalRating = itemToUpdate.rating * itemToUpdate.reviewCount;\n            itemToUpdate.rating = (oldTotalRating + newReviewData.rating) / newReviewCount;\n            itemToUpdate.reviewCount = newReviewCount;\n            itemToUpdate.reviews = [reviewToAdd, ...itemToUpdate.reviews];\n            updatedReviews[existingItemIndex] = itemToUpdate;\n            updatedItem = itemToUpdate;\n            console.log(language === 'en' ? 'Review added to existing item!' : 'เพิ่มรีวิวในรายการที่มีอยู่แล้ว!');\n        } else {\n            const newItem = {\n                id: `new-item-${Date.now()}`,\n                itemName: newReviewData.itemName.trim(),\n                mainCategory: newReviewData.mainCategory,\n                category: newReviewData.category,\n                subCategory: newReviewData.subCategory,\n                location: newReviewData.location,\n                rating: newReviewData.rating,\n                reviewCount: 1,\n                reviews: [reviewToAdd]\n            };\n            updatedReviews = [newItem, ...updatedReviews];\n            updatedItem = newItem;\n            console.log(language === 'en' ? 'New item and review submitted!' : 'ส่งรายการใหม่และรีวิวแล้ว!');\n        }\n        \n        setReviews(updatedReviews);\n        setShowReviewForm(false);\n        setNewReview({\n            itemName: '', mainCategory: '', category: '', subCategory: '', \n            location: { city: '', district: '', zone: '', subDistrict: '', street: '', alley: '', specificArea: '' },\n            rating: 5, comment: '', author: user.displayName || ''\n        });\n        \n        if (page === 'detail') {\n            setSelectedItem(updatedItem);\n        }\n    };\n\n    useEffect(() => {\n        if (filteredReviews.length === 0 && isAuthReady && page === 'home') {\n            setIsLoadingNoMatchingReviewsMessage(true);\n            setTimeout(() => {\n                const message = language === 'en' \n                    ? `No reviews match your filters. Be the first to add one!`\n                    : `ไม่พบรีวิวที่ตรงกับเกณฑ์ของคุณ เป็นคนแรกที่เพิ่มรีวิว!`;\n                setNoMatchingReviewsMessage(message);\n                setIsLoadingNoMatchingReviewsMessage(false);\n            }, 300);\n        }\n    }, [filteredReviews.length, isAuthReady, language, page]);\n\n    if (page === 'payment') {\n        return <PaymentPage onBack={handleBack} onComplete={handlePaymentComplete} />;\n    }\n\n    if (page === 'detail') {\n        return (\n            <ItemDetailPage\n                item={selectedItem}\n                onBack={handleBack}\n                language={language}\n                categories={categories}\n                citiesData={citiesData}\n                bangkokStreetsData={bangkokStreetsData}\n                generatedImages={generatedImages}\n                setGeneratedImages={setGeneratedImages}\n            />\n        );\n    }\n    \n return (\n  <div className=\"min-h-screen bg-gradient-to-br from-gray-950 via-gray-900 to-gray-950 text-gray-100 font-sans antialiased pt-12\">\n    {/* Enhanced Header */}\n    <Header\n      showHeader={showHeader}\n      toggleSearchBar={toggleSearchBar}\n      toggleFilters={toggleFilters}\n      user={user}\n      handleLogin={handleLogin}\n      handleLogout={handleLogout}\n      setShowReviewForm={setShowReviewForm}\n      onBuyCredits={handleBuyCredits}\n      creditsBalance={creditsBalance}\n      language={language}\n      setLanguage={setLanguage}\n      GoogleIcon={GoogleIcon}\n    />\n\n      {showSearchBar && (\n        <div className=\"px-4 py-2\">\n          <div className=\"relative\">\n            <Search className=\"absolute left-3 top-2.5 text-gray-400\" size={16} />\n            <input\n              type=\"text\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              placeholder={language === 'en' ? 'Search...' : 'ค้นหา...'}\n              className=\"w-full pl-8 pr-3 py-2 rounded-md bg-gray-800 placeholder-gray-500 text-sm focus:outline-none\"\n            />\n          </div>\n        </div>\n      )}\n\n      {showFilters && (\n        <FilterBar onFilterChange={handleFilterChange} language={language} />\n      )}\n\n    {/* Main Content */}\n    <ItemList\n      filteredReviews={filteredReviews}\n      isAuthReady={isAuthReady}\n      handleItemClick={handleItemClick}\n      language={language}\n      categories={categories}\n      citiesData={citiesData}\n      bangkokStreetsData={bangkokStreetsData}\n      generatedImages={generatedImages}\n      setGeneratedImages={setGeneratedImages}\n      isLoadingNoMatchingReviewsMessage={isLoadingNoMatchingReviewsMessage}\n      noMatchingReviewsMessage={noMatchingReviewsMessage}\n      generateImage={generateImage}\n    />\n\n    {/* Modal */}\n    {showReviewForm && (\n      <ReviewFormModal\n        show={showReviewForm}\n        onClose={() => setShowReviewForm(false)}\n        newReview={newReview}\n        setNewReview={setNewReview}\n        onSubmit={handleSubmitReview}\n        categories={categories}\n        citiesData={citiesData}\n        bangkokStreetsData={bangkokStreetsData}\n        language={language}\n      />\n    )}\n  </div>\n);\n\n};\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}